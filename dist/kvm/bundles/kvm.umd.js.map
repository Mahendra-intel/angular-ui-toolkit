{"version":3,"file":"kvm.umd.js","sources":["../../../projects/kvm/src/environments/environment.ts","../../../projects/kvm/src/lib/kvm.service.ts","../../../projects/kvm/src/lib/auth.service.ts","../../../projects/kvm/src/lib/kvm.component.ts","../../../projects/kvm/src/lib/kvm.component.html","../../../projects/kvm/src/lib/app/device-toolbar/device-toolbar.component.ts","../../../projects/kvm/src/lib/app/device-toolbar/device-toolbar.component.html","../../../projects/kvm/src/lib/kvm.module.ts","../../../projects/kvm/src/public-api.ts","../../../projects/kvm/src/kvm.ts"],"sourcesContent":["export const environment = {\r\n    production: false,\r\n    mpsServer: 'https://localhost/mps',\r\n    rpsServer: 'https://localhost/rps' \r\n}","import { HttpClient } from '@angular/common/http';\nimport { EventEmitter, Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport { environment } from '../environments/environment';\nimport { AmtFeaturesResponse, PowerState } from '../models/models';\n\n@Injectable({\n  providedIn: 'platform',\n})\nexport class KvmService {\n  connectKVMSocket: EventEmitter<boolean> = new EventEmitter<boolean>(false);\n  stopwebSocket: EventEmitter<boolean> = new EventEmitter<boolean>(false);\n\n  constructor(private readonly http: HttpClient) {}\n\n  setAmtFeatures(deviceId: string): Observable<AmtFeaturesResponse> {\n    const payload = {\n      userConsent: 'none',\n      enableKVM: true,\n      enableSOL: true,\n      enableIDER: true,\n    };\n    return this.http\n      .post<AmtFeaturesResponse>(\n        `${environment.mpsServer}/api/v1/amt/features/${deviceId}`,\n        payload\n      )\n      .pipe(\n        catchError((err) => {\n          throw err;\n        })\n      );\n  }\n  getPowerState(deviceId: string): Observable<PowerState> {\n    return this.http\n      .get<PowerState>(\n        `${environment.mpsServer}/api/v1/amt/power/state/${deviceId}`\n      )\n      .pipe(\n        catchError((err) => {\n          throw err;\n        })\n      );\n  }\n  sendPowerAction(\n    deviceId: string,\n    action: number,\n    useSOL: boolean = false\n  ): Observable<any> {\n    const payload = {\n      method: 'PowerAction',\n      action,\n      useSOL,\n    };\n    return this.http\n      .post<any>(\n        `${environment.mpsServer}/api/v1/amt/power/action/${deviceId}`,\n        payload\n      )\n      .pipe(\n        catchError((err) => {\n          throw err;\n        })\n      );\n  }\n}\n","import { HttpClient } from '@angular/common/http';\r\nimport { EventEmitter, Injectable } from '@angular/core';\r\nimport { environment } from '../environments/environment';\r\n\r\n@Injectable({\r\n  providedIn: 'platform',\r\n})\r\nexport class AuthService {\r\n  loggedInSubject: EventEmitter<boolean> = new EventEmitter<boolean>(false);\r\n  isLoggedIn = false;\r\n  url: string = `${environment.mpsServer}/api/v1/authorize`;\r\n\r\n  constructor(private readonly http: HttpClient) {\r\n    if (localStorage.loggedInUser != null) {\r\n      this.isLoggedIn = true;\r\n      this.loggedInSubject.next(this.isLoggedIn);\r\n    }\r\n    if (environment.mpsServer.includes('/mps')) {\r\n      // handles kong route\r\n      this.url = `${environment.mpsServer}/login/api/v1/authorize`;\r\n    }\r\n  }\r\n\r\n  getLoggedUserToken(): string {\r\n    const loggedUser: any = localStorage.getItem('loggedInUser');\r\n    const token: string = JSON.parse(loggedUser).token;\r\n    return token;\r\n  }\r\n}\r\n","import {\n  AfterViewInit,\n  Component,\n  ElementRef,\n  EventEmitter,\n  Input,\n  OnDestroy,\n  OnInit,\n  Output,\n  ViewChild,\n} from '@angular/core';\nimport {\n  AMTDesktop,\n  AMTKvmDataRedirector,\n  ConsoleLogger,\n  DataProcessor,\n  IDataProcessor,\n  ILogger,\n  KeyBoardHelper,\n  MouseHelper,\n  Protocol,\n} from '@open-amt-cloud-toolkit/ui-toolkit/core';\nimport { environment } from '../environments/environment';\n// import { ActivatedRoute } from '@angular/router';\nimport { KvmService } from './kvm.service';\nimport { fromEvent, interval, of, Subscription, timer } from 'rxjs';\nimport { catchError, finalize, mergeMap, throttleTime } from 'rxjs/operators';\n// import { MatDialog } from '@angular/material/dialog';\n// import { MatSnackBar } from '@angular/material/snack-bar';\n// import { PowerUpAlertComponent } from './shared/power-up-alert/power-up-alert.component';\n// import SnackbarDefaults from './shared/config/snackBarDefault';\nimport { AuthService } from './auth.service'\n// import { ActivatedRoute } from '@angular/router';\n\n@Component({\n  selector: 'amt-kvm',\n  templateUrl: './kvm.component.html',\n  styles: [],\n})\nexport class KvmComponent implements OnInit, AfterViewInit, OnDestroy {\n  @ViewChild('canvas', { static: false }) canvas: ElementRef | undefined;\n  public context!: CanvasRenderingContext2D;\n\n  // //setting a width and height for the canvas\n\n  @Input() public width = 400;\n  @Input() public height = 400;\n  @Output() deviceState: number = 0;\n  @Output() deviceStatus: EventEmitter<number> = new EventEmitter<number>();\n  stopSocketSubscription!: Subscription;\n  startSocketSubscription!: Subscription;\n  module: any;\n  redirector: any;\n  dataProcessor!: IDataProcessor | null;\n  mouseHelper!: MouseHelper;\n  keyboardHelper!: KeyBoardHelper;\n  logger!: ILogger;\n  powerState: any = 0;\n  btnText: string = 'Disconnect';\n  isPoweredOn: boolean = false;\n  isLoading: boolean = false;\n  deviceId: string = '';\n  selected: number = 1;\n  timeInterval!: any;\n  server: string = `${environment.mpsServer.replace('http', 'ws')}/relay`;\n  previousAction = 'kvm';\n  selectedAction = '';\n  mouseMove: any = null;\n\n  encodings = [\n    { value: 1, viewValue: 'RLE 8' },\n    { value: 2, viewValue: 'RLE 16' },\n  ];\n\n  constructor(\n    // public snackBar: MatSnackBar,\n    // public dialog: MatDialog,\n    private readonly authService: AuthService,\n    private readonly devicesService: KvmService,\n    // public readonly activatedRoute: ActivatedRoute\n  ) {\n    if (environment.mpsServer.includes('/mps')) {\n      //handles kong route\n      this.server = `${environment.mpsServer.replace('http', 'ws')}/ws/relay`;\n    }\n  }\n\n  ngOnInit(): void {\n    this.logger = new ConsoleLogger(1);\n    // this.activatedRoute.params.subscribe((params) => {\n    //   this.isLoading = true;\n    //   this.deviceId = params.id;\n    // });\n    this.stopSocketSubscription = this.devicesService.stopwebSocket.subscribe(\n      () => {\n        this.stopKvm();\n      }\n    );\n    this.startSocketSubscription =\n      this.devicesService.connectKVMSocket.subscribe(() => {\n        this.setAmtFeatures();\n      });\n    this.timeInterval = interval(15000)\n      .pipe(mergeMap(() => this.devicesService.getPowerState(this.deviceId)))\n      .subscribe();\n  }\n\n  ngAfterViewInit(): void {\n    this.setAmtFeatures();\n  }\n\n  instantiate(): void {\n    this.context = this.canvas?.nativeElement.getContext('2d');\n    this.redirector = new AMTKvmDataRedirector(\n      this.logger,\n      Protocol.KVM,\n      new FileReader(),\n      this.deviceId,\n      16994,\n      '',\n      '',\n      0,\n      0,\n      this.authService.getLoggedUserToken(),\n      this.server\n    );\n    this.module = new AMTDesktop(this.logger as any, this.context);\n    this.dataProcessor = new DataProcessor(\n      this.logger,\n      this.redirector,\n      this.module\n    );\n    this.mouseHelper = new MouseHelper(this.module, this.redirector, 200);\n    this.keyboardHelper = new KeyBoardHelper(this.module, this.redirector);\n\n    this.redirector.onProcessData = this.module.processData.bind(this.module);\n    this.redirector.onStart = this.module.start.bind(this.module);\n    this.redirector.onNewState = this.module.onStateChange.bind(this.module);\n    this.redirector.onSendKvmData = this.module.onSendKvmData.bind(this.module);\n    this.redirector.onStateChanged = this.onConnectionStateChange.bind(this);\n    this.redirector.onError = this.onRedirectorError.bind(this);\n    this.module.onSend = this.redirector.send.bind(this.redirector);\n    this.module.onProcessData = this.dataProcessor.processData.bind(\n      this.dataProcessor\n    );\n    this.module.bpp = this.selected;\n    this.mouseMove = fromEvent(this.canvas?.nativeElement, 'mousemove');\n    this.mouseMove.pipe(throttleTime(200)).subscribe((event: any) => {\n      if (this.mouseHelper != null) {\n        this.mouseHelper.mousemove(event);\n      }\n    });\n  }\n\n  onConnectionStateChange = (redirector: any, state: number): any => {\n    this.deviceState = state;\n    this.deviceStatus.emit(state);\n  };\n\n  onRedirectorError(): void {\n    this.reset();\n  }\n\n  init(): void {\n    this.devicesService\n      .getPowerState(this.deviceId)\n      .pipe(\n        catchError(() => {\n          // this.snackBar.open(`Error retrieving power status`, undefined, SnackbarDefaults.defaultError)\n          return of();\n        }),\n        finalize(() => {})\n      )\n      .subscribe((data) => {\n        this.powerState = data;\n        this.isPoweredOn = this.checkPowerStatus();\n        if (!this.isPoweredOn) {\n          this.isLoading = false;\n          // const dialog = this.dialog.open(PowerUpAlertComponent);\n          // dialog.afterClosed().subscribe((result) => {\n          //   if (result) {\n          //     this.isLoading = true;\n          //     this.devicesService\n          //       .sendPowerAction(this.deviceId, 2)\n          //       .pipe()\n          //       .subscribe((data) => {\n          //         this.instantiate();\n          //         setTimeout(() => {\n          //           this.isLoading = false;\n          //           this.autoConnect();\n          //         }, 4000);\n          //       });\n          //   }\n          // });\n        } else {\n          this.instantiate();\n          setTimeout(() => {\n            this.isLoading = false;\n            this.autoConnect();\n          }, 0);\n        }\n      });\n  }\n\n  setAmtFeatures(): void {\n    this.isLoading = true;\n    console.log('coming inside in setAmtfeatures');\n    this.devicesService\n      .setAmtFeatures(this.deviceId)\n      .pipe(\n        catchError(() => {\n          // this.snackBar.open(`Error enabling kvm`, undefined, SnackbarDefaults.defaultError)\n          this.init();\n          return of();\n        }),\n        finalize(() => {})\n      )\n      .subscribe(() => this.init());\n  }\n\n  autoConnect(): void {\n    if (this.redirector != null) {\n      this.redirector.start(WebSocket);\n      this.keyboardHelper.GrabKeyInput();\n    }\n  }\n\n  \n  onEncodingChange (): void {\n    this.stopKvm()\n    timer(1000).subscribe(() => {\n      this.autoConnect()\n    })\n  }\n\n  checkPowerStatus(): boolean {\n    return this.powerState.powerstate === 2;\n  }\n\n  reset = (): void => {\n    this.redirector = null;\n    this.module = null;\n    this.dataProcessor = null;\n    this.height = 400;\n    this.width = 400;\n    this.instantiate();\n  };\n\n  stopKvm = (): void => {\n    this.redirector.stop();\n    this.keyboardHelper.UnGrabKeyInput();\n    this.reset();\n  };\n\n  ngDoCheck(): void {\n    if (this.selectedAction !== this.previousAction) {\n      this.previousAction = this.selectedAction;\n    }\n  }\n\n  onMouseup(event: MouseEvent): void {\n    if (this.mouseHelper != null) {\n      this.mouseHelper.mouseup(event);\n    }\n  }\n\n  onMousedown(event: MouseEvent): void {\n    if (this.mouseHelper != null) {\n      this.mouseHelper.mousedown(event);\n    }\n  }\n\n  ngOnDestroy (): void {\n    if (this.timeInterval) {\n      this.timeInterval.unsubscribe()\n    }\n    this.stopKvm()\n    if (this.startSocketSubscription) {\n      this.startSocketSubscription.unsubscribe()\n    }\n    if (this.stopSocketSubscription) {\n      this.stopSocketSubscription.unsubscribe()\n    }\n  }\n}\n","<!-- <amt-device-toolbar></amt-device-toolbar> -->\r\n<div>\r\n    <button style=\"display: block;\"> connect </button>\r\n    <canvas class=\"canvas\" #canvas [width]=\"width\" [height]=\"height\" oncontextmenu=\"return false\" (mouseup)=\"onMouseup($event)\" (mousedown)=\"onMousedown($event)\"></canvas>\r\n</div>\r\n\r\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'amt-device-toolbar',\n  templateUrl: './device-toolbar.component.html',\n  styleUrls: ['./device-toolbar.component.css']\n})\nexport class DeviceToolbarComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<div>Device Control</div>\n<div>List</div>\n<button>tv</button>","import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { KvmComponent } from './kvm.component';\nimport { DeviceToolbarComponent } from './app/device-toolbar/device-toolbar.component';\nimport { HttpClientModule } from '@angular/common/http';\nimport { AuthService } from './auth.service';\nimport { KvmService } from './kvm.service';\n\n@NgModule({\n  declarations: [KvmComponent, DeviceToolbarComponent],\n  imports: [HttpClientModule, BrowserModule],\n  exports: [KvmComponent],\n  schemas: [CUSTOM_ELEMENTS_SCHEMA],\n  providers: [AuthService, KvmService],\n})\nexport class KvmModule {}\n","/*\n * Public API Surface of kvm\n */\n\nexport * from './lib/kvm.service';\nexport * from './lib/kvm.component';\nexport * from './lib/kvm.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["EventEmitter","catchError","Injectable","ConsoleLogger","interval","mergeMap","AMTKvmDataRedirector","Protocol","AMTDesktop","DataProcessor","MouseHelper","KeyBoardHelper","fromEvent","throttleTime","of","finalize","timer","i0.ɵɵelementStart","i0.ɵɵtext","i0.ɵɵelementEnd","i0.ɵɵlistener","i0.ɵɵadvance","i0.ɵɵproperty","Component","ViewChild","Input","Output","HttpClientModule","BrowserModule","NgModule","CUSTOM_ELEMENTS_SCHEMA"],"mappings":"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"}