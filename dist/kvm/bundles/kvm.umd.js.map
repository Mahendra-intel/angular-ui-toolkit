{"version":3,"file":"kvm.umd.js","sources":["../../../projects/kvm/src/environments/environment.ts","../../../projects/kvm/src/lib/kvm.service.ts","../../../projects/kvm/src/lib/shared/power-up-alert/power-up-alert.component.ts","../../../projects/kvm/src/lib/shared/power-up-alert/power-up-alert.component.html","../../../projects/kvm/src/lib/shared/config/snackBarDefault.ts","../../../projects/kvm/src/lib/auth.service.ts","../../../projects/kvm/src/lib/kvm.component.html","../../../projects/kvm/src/lib/kvm.component.ts","../../../projects/kvm/src/lib/app/device-toolbar/device-toolbar.component.ts","../../../projects/kvm/src/lib/app/device-toolbar/device-toolbar.component.html","../../../projects/kvm/src/lib/shared/are-you-sure/are-you-sure.component.ts","../../../projects/kvm/src/lib/shared/dialog-content/dialog-content.component.ts","../../../projects/kvm/src/lib/shared/shared.module.ts","../../../projects/kvm/src/lib/authorize.interceptor.ts","../../../projects/kvm/src/lib/kvm.module.ts","../../../projects/kvm/src/public-api.ts","../../../projects/kvm/src/kvm.ts"],"sourcesContent":["export const environment = {\r\n    production: false,\r\n    mpsServer: 'https://52.172.14.137/mps',\r\n    rpsServer: 'https://52.172.14.137/rps' \r\n}","import { HttpClient } from '@angular/common/http';\r\nimport { EventEmitter, Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\nimport { environment } from '../environments/environment';\r\nimport { AmtFeaturesResponse, PowerState } from '../models/models';\r\n\r\n@Injectable({\r\n  providedIn: 'platform',\r\n})\r\nexport class KvmService {\r\n  connectKVMSocket: EventEmitter<boolean> = new EventEmitter<boolean>(false);\r\n  stopwebSocket: EventEmitter<boolean> = new EventEmitter<boolean>(false);\r\n\r\n  constructor(private readonly http: HttpClient) {}\r\n\r\n  setAmtFeatures(deviceId: string): Observable<AmtFeaturesResponse> {\r\n    const payload = {\r\n      userConsent: 'none',\r\n      enableKVM: true,\r\n      enableSOL: true,\r\n      enableIDER: true,\r\n    };\r\n    return this.http\r\n      .post<AmtFeaturesResponse>(\r\n        `${environment.mpsServer}/api/v1/amt/features/${deviceId}`,\r\n        payload\r\n      )\r\n      .pipe(\r\n        catchError((err) => {\r\n          throw err;\r\n        })\r\n      );\r\n  }\r\n  getPowerState(deviceId: string): Observable<PowerState> {\r\n    return this.http\r\n      .get<PowerState>(\r\n        `${environment.mpsServer}/api/v1/amt/power/state/${deviceId}`\r\n      )\r\n      .pipe(\r\n        catchError((err) => {\r\n          throw err;\r\n        })\r\n      );\r\n  }\r\n  sendPowerAction(\r\n    deviceId: string,\r\n    action: number,\r\n    useSOL: boolean = false\r\n  ): Observable<any> {\r\n    const payload = {\r\n      method: 'PowerAction',\r\n      action,\r\n      useSOL,\r\n    };\r\n    return this.http\r\n      .post<any>(\r\n        `${environment.mpsServer}/api/v1/amt/power/action/${deviceId}`,\r\n        payload\r\n      )\r\n      .pipe(\r\n        catchError((err) => {\r\n          throw err;\r\n        })\r\n      );\r\n  }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'amt-power-up-alert',\r\n  templateUrl: './power-up-alert.component.html',\r\n  styleUrls: ['./power-up-alert.component.scss']\r\n})\r\nexport class PowerUpAlertComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<h2 mat-dialog-title>Your device is not powered on</h2>\r\n<mat-dialog-content class=\"mat-typography\">\r\n  Do you want to send a power up command to the device?\r\n</mat-dialog-content>\r\n<mat-dialog-actions align=\"end\">\r\n  <button mat-button mat-dialog-close>No</button>\r\n  <button mat-button [mat-dialog-close]=\"true\" cdkFocusInitial>Yes</button>\r\n</mat-dialog-actions>\r\n","import { MatSnackBarConfig } from '@angular/material/snack-bar';\r\n\r\ninterface SnackbarConfigs {\r\n  defaultError: MatSnackBarConfig;\r\n  longError: MatSnackBarConfig;\r\n  quickError: MatSnackBarConfig;\r\n  defaultSuccess: MatSnackBarConfig;\r\n  longSuccess: MatSnackBarConfig;\r\n  quickSuccess: MatSnackBarConfig;\r\n}\r\n\r\nconst SnackbarDefaults: SnackbarConfigs = {\r\n  defaultError: { duration: 3000, panelClass: ['error', 'mat-elevation-z12'] },\r\n  longError: { duration: 10000, panelClass: ['error', 'mat-elevation-z12'] },\r\n  quickError: { duration: 1000, panelClass: ['error', 'mat-elevation-z12'] },\r\n  defaultSuccess: {\r\n    duration: 3000,\r\n    panelClass: ['success', 'mat-elevation-z12'],\r\n  },\r\n  longSuccess: {\r\n    duration: 10000,\r\n    panelClass: ['success', 'mat-elevation-z12'],\r\n  },\r\n  quickSuccess: {\r\n    duration: 1000,\r\n    panelClass: ['success', 'mat-elevation-z12'],\r\n  },\r\n};\r\n\r\nexport default SnackbarDefaults;\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { EventEmitter, Injectable } from '@angular/core';\r\nimport { environment } from '../environments/environment';\r\n\r\n@Injectable({\r\n  providedIn: 'platform',\r\n})\r\nexport class AuthService {\r\n  loggedInSubject: EventEmitter<boolean> = new EventEmitter<boolean>(false);\r\n  isLoggedIn = false;\r\n  url: string = `${environment.mpsServer}/api/v1/authorize`;\r\n\r\n  constructor(private readonly http: HttpClient) {\r\n    if (localStorage.loggedInUser != null) {\r\n      this.isLoggedIn = true;\r\n      this.loggedInSubject.next(this.isLoggedIn);\r\n    }\r\n    if (environment.mpsServer.includes('/mps')) {\r\n      // handles kong route\r\n      this.url = `${environment.mpsServer}/login/api/v1/authorize`;\r\n    }\r\n  }\r\n\r\n  getLoggedUserToken(): string {\r\n    const loggedUser: any = localStorage.getItem('loggedInUser');\r\n    const token: string = JSON.parse(loggedUser).token;\r\n    return token;\r\n  }\r\n}\r\n","<mat-toolbar>\r\n  <mat-form-field>\r\n    <mat-label>Choose encoding type</mat-label>\r\n    <mat-select [(ngModel)]=\"selected\" (ngModelChange)=\"onEncodingChange()\">\r\n      <mat-option *ngFor=\"let encode of encodings\" [value]=\"encode.value\">\r\n        {{ encode.viewValue }}\r\n      </mat-option>\r\n    </mat-select>\r\n  </mat-form-field>\r\n</mat-toolbar>\r\n<canvas\r\n  class=\"canvas\"\r\n  #canvas\r\n  [width]=\"width\"\r\n  [height]=\"height\"\r\n  oncontextmenu=\"return false\"\r\n  (mouseup)=\"onMouseup($event)\"\r\n  (mousedown)=\"onMousedown($event)\"\r\n></canvas>\r\n","import {\r\n  AfterViewInit,\r\n  Component,\r\n  ElementRef,\r\n  EventEmitter,\r\n  Inject,\r\n  Input,\r\n  OnDestroy,\r\n  OnInit,\r\n  Output,\r\n  ViewChild,\r\n} from '@angular/core';\r\nimport {\r\n  AMTDesktop,\r\n  AMTKvmDataRedirector,\r\n  ConsoleLogger,\r\n  DataProcessor,\r\n  IDataProcessor,\r\n  ILogger,\r\n  KeyBoardHelper,\r\n  MouseHelper,\r\n  Protocol,\r\n} from '@open-amt-cloud-toolkit/ui-toolkit/core';\r\nimport { environment } from '../environments/environment';\r\nimport { KvmService } from './kvm.service';\r\nimport { fromEvent, interval, of, Subscription, timer } from 'rxjs';\r\nimport { catchError, finalize, mergeMap, throttleTime } from 'rxjs/operators';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { AuthService } from './auth.service';\r\nimport { PowerUpAlertComponent } from './shared/power-up-alert/power-up-alert.component';\r\nimport SnackbarDefaults from './shared/config/snackBarDefault';\r\n\r\n@Component({\r\n  selector: 'amt-kvm',\r\n  templateUrl: './kvm.component.html',\r\n  styles: [],\r\n})\r\nexport class KvmComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  @ViewChild('canvas', { static: false }) canvas: ElementRef | undefined;\r\n  public context!: CanvasRenderingContext2D;\r\n\r\n  // //setting a width and height for the canvas\r\n\r\n  @Input() public width = 400;\r\n  @Input() public height = 400;\r\n  @Output() deviceState: number = 0;\r\n  @Output() deviceStatus: EventEmitter<number> = new EventEmitter<number>();\r\n  stopSocketSubscription!: Subscription;\r\n  startSocketSubscription!: Subscription;\r\n  module: any;\r\n  redirector: any;\r\n  dataProcessor!: IDataProcessor | null;\r\n  mouseHelper!: MouseHelper;\r\n  keyboardHelper!: KeyBoardHelper;\r\n  logger!: ILogger;\r\n  powerState: any = 0;\r\n  btnText: string = 'Disconnect';\r\n  isPoweredOn: boolean = false;\r\n  isLoading: boolean = false;\r\n  deviceId: string = '';\r\n  selected: number = 1;\r\n  timeInterval!: any;\r\n  server: string = `${environment.mpsServer.replace('http', 'ws')}/relay`;\r\n  previousAction = 'kvm';\r\n  selectedAction = '';\r\n  mouseMove: any = null;\r\n\r\n  encodings = [\r\n    { value: 1, viewValue: 'RLE 8' },\r\n    { value: 2, viewValue: 'RLE 16' },\r\n  ];\r\n\r\n  constructor(\r\n    public snackBar: MatSnackBar,\r\n    public dialog: MatDialog,\r\n    private readonly authService: AuthService,\r\n    private readonly devicesService: KvmService,\r\n    @Inject('userInput') public params // public readonly activatedRoute: ActivatedRoute\r\n  ) {\r\n    this.deviceId = this.params.deviceId;\r\n    if (environment.mpsServer.includes('/mps')) {\r\n      //handles kong route\r\n      this.server = `${environment.mpsServer.replace('http', 'ws')}/ws/relay`;\r\n    }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.logger = new ConsoleLogger(1);\r\n    // this.activatedRoute.params.subscribe((params) => {\r\n    //   this.isLoading = true;\r\n    //   this.deviceId = params.id;\r\n    // });\r\n    this.stopSocketSubscription = this.devicesService.stopwebSocket.subscribe(\r\n      () => {\r\n        this.stopKvm();\r\n      }\r\n    );\r\n    this.startSocketSubscription =\r\n      this.devicesService.connectKVMSocket.subscribe(() => {\r\n        this.setAmtFeatures();\r\n      });\r\n    this.timeInterval = interval(15000)\r\n      .pipe(mergeMap(() => this.devicesService.getPowerState(this.deviceId)))\r\n      .subscribe();\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.setAmtFeatures();\r\n  }\r\n\r\n  instantiate(): void {\r\n    this.context = this.canvas?.nativeElement.getContext('2d');\r\n    this.redirector = new AMTKvmDataRedirector(\r\n      this.logger,\r\n      Protocol.KVM,\r\n      new FileReader(),\r\n      this.deviceId,\r\n      16994,\r\n      '',\r\n      '',\r\n      0,\r\n      0,\r\n      this.authService.getLoggedUserToken(),\r\n      this.server\r\n    );\r\n    this.module = new AMTDesktop(this.logger as any, this.context);\r\n    this.dataProcessor = new DataProcessor(\r\n      this.logger,\r\n      this.redirector,\r\n      this.module\r\n    );\r\n    this.mouseHelper = new MouseHelper(this.module, this.redirector, 200);\r\n    this.keyboardHelper = new KeyBoardHelper(this.module, this.redirector);\r\n\r\n    this.redirector.onProcessData = this.module.processData.bind(this.module);\r\n    this.redirector.onStart = this.module.start.bind(this.module);\r\n    this.redirector.onNewState = this.module.onStateChange.bind(this.module);\r\n    this.redirector.onSendKvmData = this.module.onSendKvmData.bind(this.module);\r\n    this.redirector.onStateChanged = this.onConnectionStateChange.bind(this);\r\n    this.redirector.onError = this.onRedirectorError.bind(this);\r\n    this.module.onSend = this.redirector.send.bind(this.redirector);\r\n    this.module.onProcessData = this.dataProcessor.processData.bind(\r\n      this.dataProcessor\r\n    );\r\n    this.module.bpp = this.selected;\r\n    this.mouseMove = fromEvent(this.canvas?.nativeElement, 'mousemove');\r\n    this.mouseMove.pipe(throttleTime(200)).subscribe((event: any) => {\r\n      if (this.mouseHelper != null) {\r\n        this.mouseHelper.mousemove(event);\r\n      }\r\n    });\r\n  }\r\n\r\n  onConnectionStateChange = (redirector: any, state: number): any => {\r\n    this.deviceState = state;\r\n    this.deviceStatus.emit(state);\r\n  };\r\n\r\n  onRedirectorError(): void {\r\n    this.reset();\r\n  }\r\n\r\n  init(): void {\r\n    this.devicesService\r\n      .getPowerState(this.deviceId)\r\n      .pipe(\r\n        catchError(() => {\r\n          this.snackBar.open(\r\n            `Error retrieving power status`,\r\n            undefined,\r\n            SnackbarDefaults.defaultError\r\n          );\r\n          return of();\r\n        }),\r\n        finalize(() => {})\r\n      )\r\n      .subscribe((data) => {\r\n        this.powerState = data;\r\n        this.isPoweredOn = this.checkPowerStatus();\r\n        if (!this.isPoweredOn) {\r\n          this.isLoading = false;\r\n          const dialog = this.dialog.open(PowerUpAlertComponent);\r\n          dialog.afterClosed().subscribe((result) => {\r\n            if (result) {\r\n              this.isLoading = true;\r\n              this.devicesService\r\n                .sendPowerAction(this.deviceId, 2)\r\n                .pipe()\r\n                .subscribe((data) => {\r\n                  this.instantiate();\r\n                  setTimeout(() => {\r\n                    this.isLoading = false;\r\n                    this.autoConnect();\r\n                  }, 4000);\r\n                });\r\n            }\r\n          });\r\n        } else {\r\n          this.instantiate();\r\n          setTimeout(() => {\r\n            this.isLoading = false;\r\n            this.autoConnect();\r\n          }, 0);\r\n        }\r\n      });\r\n  }\r\n\r\n  setAmtFeatures(): void {\r\n    this.isLoading = true;\r\n    this.devicesService\r\n      .setAmtFeatures(this.deviceId)\r\n      .pipe(\r\n        catchError(() => {\r\n          this.snackBar.open(\r\n            `Error enabling kvm`,\r\n            undefined,\r\n            SnackbarDefaults.defaultError\r\n          );\r\n          this.init();\r\n          return of();\r\n        }),\r\n        finalize(() => {})\r\n      )\r\n      .subscribe(() => this.init());\r\n  }\r\n\r\n  autoConnect(): void {\r\n    if (this.redirector != null) {\r\n      this.redirector.start(WebSocket);\r\n      this.keyboardHelper.GrabKeyInput();\r\n    }\r\n  }\r\n\r\n  onEncodingChange(): void {\r\n    this.stopKvm();\r\n    timer(1000).subscribe(() => {\r\n      this.autoConnect();\r\n    });\r\n  }\r\n\r\n  checkPowerStatus(): boolean {\r\n    return this.powerState.powerstate === 2;\r\n  }\r\n\r\n  reset = (): void => {\r\n    this.redirector = null;\r\n    this.module = null;\r\n    this.dataProcessor = null;\r\n    this.height = 400;\r\n    this.width = 400;\r\n    this.instantiate();\r\n  };\r\n\r\n  stopKvm = (): void => {\r\n    this.redirector.stop();\r\n    this.keyboardHelper.UnGrabKeyInput();\r\n    this.reset();\r\n  };\r\n\r\n  ngDoCheck(): void {\r\n    if (this.selectedAction !== this.previousAction) {\r\n      this.previousAction = this.selectedAction;\r\n    }\r\n  }\r\n\r\n  onMouseup(event: MouseEvent): void {\r\n    if (this.mouseHelper != null) {\r\n      this.mouseHelper.mouseup(event);\r\n    }\r\n  }\r\n\r\n  onMousedown(event: MouseEvent): void {\r\n    if (this.mouseHelper != null) {\r\n      this.mouseHelper.mousedown(event);\r\n    }\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    if (this.timeInterval) {\r\n      this.timeInterval.unsubscribe();\r\n    }\r\n    this.stopKvm();\r\n    if (this.startSocketSubscription) {\r\n      this.startSocketSubscription.unsubscribe();\r\n    }\r\n    if (this.stopSocketSubscription) {\r\n      this.stopSocketSubscription.unsubscribe();\r\n    }\r\n  }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'amt-device-toolbar',\r\n  templateUrl: './device-toolbar.component.html',\r\n  styleUrls: ['./device-toolbar.component.css']\r\n})\r\nexport class DeviceToolbarComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div>Device Control</div>\r\n<div>List</div>\r\n<button>tv</button>","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'amt-are-you-sure',\r\n  templateUrl: './are-you-sure.component.html',\r\n  styleUrls: ['./are-you-sure.component.scss']\r\n})\r\nexport class AreYouSureDialogComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","import { Component, Inject, OnInit } from '@angular/core';\r\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\r\n\r\n@Component({\r\n  selector: 'amt-dialog-content',\r\n  templateUrl: './dialog-content.component.html',\r\n  styleUrls: ['./dialog-content.component.scss'],\r\n})\r\nexport class DialogContentComponent implements OnInit {\r\n  constructor(@Inject(MAT_DIALOG_DATA) public data: { name: string }) {}\r\n  ngOnInit(): void {}\r\n}\r\n","/*********************************************************************\r\n* Copyright (c) Intel Corporation 2021\r\n* SPDX-License-Identifier: Apache-2.0\r\n**********************************************************************/\r\n/* eslint-disable @typescript-eslint/no-extraneous-class */\r\nimport { NgModule, ModuleWithProviders } from '@angular/core'\r\nimport { CommonModule } from '@angular/common'\r\nimport { ReactiveFormsModule, FormsModule } from '@angular/forms'\r\nimport { MatGridListModule } from '@angular/material/grid-list'\r\nimport { MatExpansionModule } from '@angular/material/expansion'\r\nimport { MatStepperModule } from '@angular/material/stepper'\r\nimport { MatChipsModule } from '@angular/material/chips'\r\nimport { MatNativeDateModule } from '@angular/material/core'\r\nimport { MatTableModule } from '@angular/material/table'\r\nimport { MatCardModule } from '@angular/material/card'\r\nimport { MatDialogModule } from '@angular/material/dialog'\r\nimport { MatListModule } from '@angular/material/list'\r\nimport { MatPaginatorModule } from '@angular/material/paginator'\r\nimport { MatSortModule } from '@angular/material/sort'\r\nimport { MatCheckboxModule } from '@angular/material/checkbox'\r\nimport { MatTooltipModule } from '@angular/material/tooltip'\r\nimport { MatAutocompleteModule } from '@angular/material/autocomplete'\r\nimport { MatSnackBarModule, MAT_SNACK_BAR_DEFAULT_OPTIONS } from '@angular/material/snack-bar'\r\nimport { MatInputModule } from '@angular/material/input'\r\nimport { MatFormFieldModule } from '@angular/material/form-field'\r\nimport { MatRadioModule } from '@angular/material/radio'\r\nimport { MatSelectModule } from '@angular/material/select'\r\nimport { MatSlideToggleModule } from '@angular/material/slide-toggle'\r\nimport { MatProgressBarModule } from '@angular/material/progress-bar'\r\nimport { MatDatepickerModule } from '@angular/material/datepicker'\r\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner'\r\nimport { MatIconModule } from '@angular/material/icon'\r\nimport { MatToolbarModule } from '@angular/material/toolbar'\r\nimport { MatSidenavModule } from '@angular/material/sidenav'\r\nimport { MatMenuModule } from '@angular/material/menu'\r\nimport { MatButtonModule } from '@angular/material/button'\r\nimport { MatTabsModule } from '@angular/material/tabs'\r\nimport { MatTreeModule } from '@angular/material/tree'\r\nimport { MatButtonToggleModule } from '@angular/material/button-toggle'\r\n\r\n// import { BrowserAnimationsModule } from '@angular/platform-browser/animations'\r\nimport { FlexLayoutModule } from '@angular/flex-layout'\r\nimport { CdkTableModule } from '@angular/cdk/table'\r\nimport { AreYouSureDialogComponent } from './are-you-sure/are-you-sure.component'\r\nimport { PowerUpAlertComponent } from './power-up-alert/power-up-alert.component'\r\nimport { DialogContentComponent } from './dialog-content/dialog-content.component'\r\n// import { HttpClientModule } from '@angular/common/http'\r\n\r\n@NgModule({\r\n  imports: [\r\n    FlexLayoutModule,\r\n    ReactiveFormsModule,\r\n    FormsModule,\r\n    MatNativeDateModule,\r\n    MatTableModule,\r\n    MatTreeModule,\r\n    MatMenuModule,\r\n    CdkTableModule,\r\n    MatButtonToggleModule,\r\n    MatRadioModule,\r\n    MatSortModule,\r\n    MatCheckboxModule,\r\n    MatTooltipModule,\r\n    MatSnackBarModule,\r\n    MatExpansionModule,\r\n    MatGridListModule,\r\n    MatChipsModule,\r\n    MatSelectModule,\r\n    MatListModule,\r\n    MatCardModule,\r\n    MatAutocompleteModule,\r\n    MatStepperModule,\r\n    MatDialogModule,\r\n    MatSidenavModule,\r\n    MatInputModule,\r\n    MatSlideToggleModule,\r\n    MatDatepickerModule,\r\n    MatProgressBarModule,\r\n    MatProgressSpinnerModule,\r\n    MatToolbarModule,\r\n    MatIconModule,\r\n    MatTabsModule,\r\n    MatFormFieldModule,\r\n    MatButtonModule,\r\n    MatPaginatorModule\r\n  ],\r\n  exports: [\r\n    FlexLayoutModule,\r\n    ReactiveFormsModule,\r\n    FormsModule,\r\n    MatAutocompleteModule,\r\n    MatDatepickerModule,\r\n    MatTableModule,\r\n    MatTreeModule,\r\n    MatIconModule,\r\n    MatSortModule,\r\n    MatButtonToggleModule,\r\n    MatTooltipModule,\r\n    MatGridListModule,\r\n    MatRadioModule,\r\n    MatCheckboxModule,\r\n    MatExpansionModule,\r\n    MatMenuModule,\r\n    MatDialogModule,\r\n    MatSnackBarModule,\r\n    MatListModule,\r\n    MatStepperModule,\r\n    MatChipsModule,\r\n    MatCardModule,\r\n    MatSelectModule,\r\n    MatInputModule,\r\n    MatToolbarModule,\r\n    MatTabsModule,\r\n    MatFormFieldModule,\r\n    MatButtonModule,\r\n    MatProgressBarModule, MatProgressSpinnerModule,\r\n    MatSlideToggleModule,\r\n    MatSidenavModule,\r\n    MatPaginatorModule,\r\n    CdkTableModule,\r\n    MatNativeDateModule\r\n  ],\r\n  providers: [\r\n    { provide: MAT_SNACK_BAR_DEFAULT_OPTIONS, useValue: { duration: 30000, panelClass: ['success', 'mat-elevation-z12'] } }\r\n  ],\r\n  declarations: [AreYouSureDialogComponent, PowerUpAlertComponent, DialogContentComponent]\r\n})\r\nexport class OpenAMTMaterialModule {\r\n\r\n}\r\n\r\n@NgModule({\r\n  declarations: [],\r\n  exports: [OpenAMTMaterialModule],\r\n  imports: [\r\n    CommonModule,\r\n    OpenAMTMaterialModule\r\n  ]\r\n})\r\nexport class SharedModule {\r\n  static forRoot (): ModuleWithProviders<SharedModule> {\r\n    return {\r\n      ngModule: SharedModule,\r\n      providers: []\r\n    }\r\n  }\r\n}\r\n","import {\r\n  HttpEvent,\r\n  HttpInterceptor,\r\n  HttpHandler,\r\n  HttpRequest,\r\n  HttpResponse,\r\n  HttpErrorResponse,\r\n} from '@angular/common/http';\r\nimport { Inject, Injectable } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { Observable, throwError } from 'rxjs';\r\nimport { tap } from 'rxjs/operators';\r\nimport { DialogContentComponent } from './shared/dialog-content/dialog-content.component';\r\n\r\n@Injectable()\r\nexport class AuthorizeInterceptor implements HttpInterceptor {\r\n  constructor(\r\n    @Inject('userInput') public params,\r\n    public dialog: MatDialog\r\n  ) {}\r\n  intercept(\r\n    request: HttpRequest<unknown>,\r\n    next: HttpHandler\r\n  ): Observable<HttpEvent<unknown>> {\r\n    request = request.clone({\r\n      setHeaders: {\r\n        Authorization: `Bearer ${this.params.authToken}`,\r\n      },\r\n    });\r\n    return next.handle(request).pipe(\r\n      tap(\r\n        (data: any) => {\r\n          if (data instanceof HttpResponse) {\r\n            return data;\r\n          }\r\n          return null;\r\n        },\r\n        (error: any) => {\r\n          if (error instanceof HttpErrorResponse) {\r\n            if (error.status === 401) {\r\n              this.dialog.open(DialogContentComponent, {\r\n                data: { name: 'session time out. Please login again' },\r\n              });\r\n            }\r\n          }\r\n          return throwError(error);\r\n        }\r\n      )\r\n    );\r\n  }\r\n}\r\n","import {\r\n  NgModule,\r\n  CUSTOM_ELEMENTS_SCHEMA,\r\n  ModuleWithProviders,\r\n  Injectable,\r\n} from '@angular/core';\r\nimport { BrowserModule } from '@angular/platform-browser';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { FlexLayoutModule } from '@angular/flex-layout';\r\nimport { KvmComponent } from './kvm.component';\r\nimport { DeviceToolbarComponent } from './app/device-toolbar/device-toolbar.component';\r\nimport { HttpClientModule, HTTP_INTERCEPTORS } from '@angular/common/http';\r\nimport { AuthService } from './auth.service';\r\nimport { KvmService } from './kvm.service';\r\nimport { SharedModule } from './shared/shared.module';\r\nimport { AuthorizeInterceptor } from './authorize.interceptor';\r\n@NgModule({\r\n  declarations: [KvmComponent, DeviceToolbarComponent],\r\n  imports: [\r\n    HttpClientModule,\r\n    FlexLayoutModule,\r\n    BrowserModule,\r\n    SharedModule.forRoot(),\r\n    BrowserAnimationsModule,\r\n  ],\r\n  exports: [KvmComponent],\r\n  schemas: [CUSTOM_ELEMENTS_SCHEMA],\r\n  providers: [\r\n    AuthService,\r\n    {\r\n      provide: HTTP_INTERCEPTORS,\r\n      useClass: AuthorizeInterceptor,\r\n      multi: true,\r\n    },\r\n  ],\r\n})\r\nexport class KvmModule {\r\n  public static forRoot(param: any): ModuleWithProviders<KvmModule> {\r\n    return {\r\n      ngModule: KvmModule,\r\n      providers: [\r\n        KvmService,\r\n        {\r\n          provide: 'userInput',\r\n          useValue: param,\r\n        },\r\n      ],\r\n    };\r\n  }\r\n}\r\n","/*\r\n * Public API Surface of kvm\r\n */\r\n\r\nexport * from './lib/kvm.service';\r\nexport * from './lib/kvm.component';\r\nexport * from './lib/kvm.module';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["EventEmitter","catchError","Injectable","i0.ɵɵelementStart","i0.ɵɵtext","i0.ɵɵelementEnd","i0.ɵɵadvance","i0.ɵɵproperty","Component","i0.ɵɵtextInterpolate1","ConsoleLogger","interval","mergeMap","AMTKvmDataRedirector","Protocol","AMTDesktop","DataProcessor","MouseHelper","KeyBoardHelper","fromEvent","throttleTime","of","finalize","timer","i0.ɵɵlistener","i0.ɵɵtemplate","Inject","ViewChild","Input","Output","MAT_DIALOG_DATA","MAT_SNACK_BAR_DEFAULT_OPTIONS","FlexLayoutModule","ReactiveFormsModule","FormsModule","MatNativeDateModule","MatTableModule","MatTreeModule","MatMenuModule","CdkTableModule","MatButtonToggleModule","MatRadioModule","MatSortModule","MatCheckboxModule","MatTooltipModule","MatSnackBarModule","MatExpansionModule","MatGridListModule","MatChipsModule","MatSelectModule","MatListModule","MatCardModule","MatAutocompleteModule","MatStepperModule","MatDialogModule","MatSidenavModule","MatInputModule","MatSlideToggleModule","MatDatepickerModule","MatProgressBarModule","MatProgressSpinnerModule","MatToolbarModule","MatIconModule","MatTabsModule","MatFormFieldModule","MatButtonModule","MatPaginatorModule","NgModule","CommonModule","tap","HttpResponse","HttpErrorResponse","throwError","HTTP_INTERCEPTORS","HttpClientModule","BrowserModule","BrowserAnimationsModule","CUSTOM_ELEMENTS_SCHEMA"],"mappings":"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"}