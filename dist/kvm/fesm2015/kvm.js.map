{"version":3,"file":"kvm.js","sources":["../../../projects/kvm/src/lib/kvm.service.ts","../../../projects/kvm/src/environments/environment.ts","../../../projects/kvm/src/lib/kvm.component.ts","../../../projects/kvm/src/lib/kvm.component.html","../../../projects/kvm/src/lib/app/device-toolbar/device-toolbar.component.ts","../../../projects/kvm/src/lib/app/device-toolbar/device-toolbar.component.html","../../../projects/kvm/src/lib/kvm.module.ts","../../../projects/kvm/src/public-api.ts","../../../projects/kvm/src/kvm.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class KvmService {\n\n  constructor() { }\n}\n","export const environment = {\r\n    production: false,\r\n    mpsServer: 'https://localhost/mps',\r\n    rpsServer: 'https://localhost/rps' \r\n}","import {\n  AfterViewInit,\n  Component,\n  ElementRef,\n  EventEmitter,\n  Input,\n  OnDestroy,\n  OnInit,\n  Output,\n  ViewChild,\n} from '@angular/core';\nimport {\n  ConsoleLogger,\n  IDataProcessor,\n  ILogger,\n  KeyBoardHelper,\n  MouseHelper,\n} from '@open-amt-cloud-toolkit/ui-toolkit/core';\nimport { environment } from '../environments/environment';\nimport { Subscription } from 'rxjs';\n// import { ActivatedRoute, Router } from '@angular/router';\n\n@Component({\n  selector: 'amt-kvm',\n  templateUrl: './kvm.component.html',\n  styles: [],\n})\nexport class KvmComponent implements OnInit {\n  @ViewChild('canvas', { static: false }) canvas: ElementRef | undefined;\n  public context!: CanvasRenderingContext2D;\n\n  // //setting a width and height for the canvas\n\n  @Input() public width = 400;\n  @Input() public height = 400;\n  @Output() deviceState: number = 0;\n  @Output() deviceStatus: EventEmitter<number> = new EventEmitter<number>();\n  stopSocketSubscription!: Subscription;\n  startSocketSubscription!: Subscription;\n  module: any;\n  redirector: any;\n  dataProcessor!: IDataProcessor | null;\n  mouseHelper!: MouseHelper;\n  keyboardHelper!: KeyBoardHelper;\n  logger!: ILogger;\n  powerState: any = 0;\n  btnText: string = 'Disconnect';\n  isPoweredOn: boolean = false;\n  isLoading: boolean = false;\n  deviceId: string = '';\n  selected: number = 1;\n  timeInterval!: any;\n  server: string = `${environment.mpsServer.replace('http', 'ws')}/relay`;\n  previousAction = 'kvm';\n  selectedAction = '';\n  mouseMove: any = null;\n\n  encodings = [\n    { value: 1, viewValue: 'RLE 8' },\n    { value: 2, viewValue: 'RLE 16' },\n  ];\n\n  constructor() {\n    console.log('comming inside with new bundle files');\n    if (environment.mpsServer.includes('/mps')) {\n      //handles kong route\n      this.server = `${environment.mpsServer.replace('http', 'ws')}/ws/relay`;\n    }\n  }\n  // ngOnDestroy(): void {\n  //   throw new Error('Method not implemented.');\n  // }\n  // ngAfterViewInit(): void {\n  //   throw new Error('Method not implemented.');\n  // }\n\n  ngOnInit(): void {\n    this.logger = new ConsoleLogger(1)\n  }\n\n  ngDoCheck(): void {\n    if (this.selectedAction !== this.previousAction) {\n      this.previousAction = this.selectedAction;\n    }\n  }\n\n  onMouseup(event: MouseEvent): void {\n    if (this.mouseHelper != null) {\n      this.mouseHelper.mouseup(event)\n    }\n  }\n\n  onMousedown(event: MouseEvent): void {\n    if (this.mouseHelper != null) {\n      this.mouseHelper.mousedown(event)\n    }\n  }\n}\n","<!-- <amt-device-toolbar></amt-device-toolbar> -->\r\n<div>\r\n    <button style=\"display: block;\"> connect </button>\r\n    <canvas class=\"canvas\" #canvas [width]=\"width\" [height]=\"height\" oncontextmenu=\"return false\" (mouseup)=\"onMouseup($event)\" (mousedown)=\"onMousedown($event)\"></canvas>\r\n</div>\r\n\r\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'amt-device-toolbar',\n  templateUrl: './device-toolbar.component.html',\n  styleUrls: ['./device-toolbar.component.css']\n})\nexport class DeviceToolbarComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<div>Device Control</div>\n<div>List</div>\n<button>tv</button>","import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { KvmComponent } from './kvm.component';\nimport { DeviceToolbarComponent } from './app/device-toolbar/device-toolbar.component';\n\n@NgModule({\n  declarations: [KvmComponent, DeviceToolbarComponent],\n  imports: [],\n  exports: [KvmComponent],\n  schemas:[CUSTOM_ELEMENTS_SCHEMA]\n})\nexport class KvmModule {}\n","/*\n * Public API Surface of kvm\n */\n\nexport * from './lib/kvm.service';\nexport * from './lib/kvm.component';\nexport * from './lib/kvm.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["i0.ɵɵelementStart","i0.ɵɵtext","i0.ɵɵelementEnd","i0.ɵɵlistener","i0.ɵɵadvance","i0.ɵɵproperty"],"mappings":";;;MAKa,UAAU;IAErB,iBAAiB;;oEAFN,UAAU;+CAAV,UAAU,WAAV,UAAU,mBAFT,MAAM;oFAEP,UAAU;cAHtB,UAAU;eAAC;gBACV,UAAU,EAAE,MAAM;aACnB;;;ACJM,MAAM,WAAW,GAAG;IACvB,UAAU,EAAE,KAAK;IACjB,SAAS,EAAE,uBAAuB;IAClC,SAAS,EAAE,uBAAuB;CACrC;;;ACgBD;MAOa,YAAY;IAmCvB;;QA7BgB,UAAK,GAAG,GAAG,CAAC;QACZ,WAAM,GAAG,GAAG,CAAC;QACnB,gBAAW,GAAW,CAAC,CAAC;QACxB,iBAAY,GAAyB,IAAI,YAAY,EAAU,CAAC;QAS1E,eAAU,GAAQ,CAAC,CAAC;QACpB,YAAO,GAAW,YAAY,CAAC;QAC/B,gBAAW,GAAY,KAAK,CAAC;QAC7B,cAAS,GAAY,KAAK,CAAC;QAC3B,aAAQ,GAAW,EAAE,CAAC;QACtB,aAAQ,GAAW,CAAC,CAAC;QAErB,WAAM,GAAW,GAAG,WAAW,CAAC,SAAS,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,QAAQ,CAAC;QACxE,mBAAc,GAAG,KAAK,CAAC;QACvB,mBAAc,GAAG,EAAE,CAAC;QACpB,cAAS,GAAQ,IAAI,CAAC;QAEtB,cAAS,GAAG;YACV,EAAE,KAAK,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE;YAChC,EAAE,KAAK,EAAE,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE;SAClC,CAAC;QAGA,OAAO,CAAC,GAAG,CAAC,sCAAsC,CAAC,CAAC;QACpD,IAAI,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE;;YAE1C,IAAI,CAAC,MAAM,GAAG,GAAG,WAAW,CAAC,SAAS,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC;SACzE;KACF;;;;;;;IAQD,QAAQ;QACN,IAAI,CAAC,MAAM,GAAG,IAAI,aAAa,CAAC,CAAC,CAAC,CAAA;KACnC;IAED,SAAS;QACP,IAAI,IAAI,CAAC,cAAc,KAAK,IAAI,CAAC,cAAc,EAAE;YAC/C,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC;SAC3C;KACF;IAED,SAAS,CAAC,KAAiB;QACzB,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,EAAE;YAC5B,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,KAAK,CAAC,CAAA;SAChC;KACF;IAED,WAAW,CAAC,KAAiB;QAC3B,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,EAAE;YAC5B,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,KAAK,CAAC,CAAA;SAClC;KACF;;wEArEU,YAAY;8CAAZ,YAAY;;;;;;QC1BzBA,wBAAK;QACDA,8BAAgC;QAACC,sBAAQ;QAAAC,cAAS;QAClDF,iCAA8J;QAAhEG,gGAAW,qBAAiB,IAAC,0FAAc,uBAAmB,IAAjC;QAAmCD,cAAS;QAC3KA,cAAM;;QAD6BE,YAAe;QAAfC,8BAAe,sBAAA;;oFDwBrC,YAAY;cALxB,SAAS;eAAC;gBACT,QAAQ,EAAE,SAAS;gBACnB,WAAW,EAAE,sBAAsB;gBACnC,MAAM,EAAE,EAAE;aACX;sCAEyC,MAAM;kBAA7C,SAAS;mBAAC,QAAQ,EAAE,EAAE,MAAM,EAAE,KAAK,EAAE;YAKtB,KAAK;kBAApB,KAAK;YACU,MAAM;kBAArB,KAAK;YACI,WAAW;kBAApB,MAAM;YACG,YAAY;kBAArB,MAAM;;;ME7BI,sBAAsB;IAEjC,iBAAiB;IAEjB,QAAQ;KACP;;4FALU,sBAAsB;wDAAtB,sBAAsB;QCPnCL,wBAAK;QAAAC,2BAAc;QAAAC,cAAM;QACzBF,wBAAK;QAAAC,iBAAI;QAAAC,cAAM;QACfF,2BAAQ;QAAAC,eAAE;QAAAC,cAAS;;oFDKN,sBAAsB;cALlC,SAAS;eAAC;gBACT,QAAQ,EAAE,oBAAoB;gBAC9B,WAAW,EAAE,iCAAiC;gBAC9C,SAAS,EAAE,CAAC,gCAAgC,CAAC;aAC9C;;;MEIY,SAAS;;kEAAT,SAAS;0CAAT,SAAS;8CAJX,EAAE;qFAIA,SAAS,mBALL,YAAY,EAAE,sBAAsB,aAEzC,YAAY;oFAGX,SAAS;cANrB,QAAQ;eAAC;gBACR,YAAY,EAAE,CAAC,YAAY,EAAE,sBAAsB,CAAC;gBACpD,OAAO,EAAE,EAAE;gBACX,OAAO,EAAE,CAAC,YAAY,CAAC;gBACvB,OAAO,EAAC,CAAC,sBAAsB,CAAC;aACjC;;;ACTD;;;;ACAA;;;;;;"}